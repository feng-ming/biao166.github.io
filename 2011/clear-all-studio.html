<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>清理浮动的几种方法以及对应规范说明-转 | LiBiao's Blog</title>
  <meta name="author" content="biao166">
  
  <meta name="description" content="前言
浮动 Floats 是 CSS 中的一种布局方式。它的渲染位置在行框与包含块之间，这样就可以使行框内文字与浮动元素不重叠并且环绕它显示。在布局过程中也经常会使用它来达到左右并排布局的效果。但是，由于浮动特性，容器如果没有明确设定高度，会依照普通流内元素高度设置，这样就会导致脱离普通流的浮动元素溢出容器，影响其后元素布局。
我们将现有已知的清楚浮动元素方法罗列下：

采用一个HTML标签，以及css的clear属性，来手工清理浮动；
采用伪类:after，动态建立一个块元素，设定 clear 属性，清理之前的浮动元素；
采用CSS overflow 非 visible 值(overflow:auto/overflow:hidden)设定使父容器包含浮动元素；
采用display:table/display:table-cell 等table系列属性将父元素变成 table 形式自动包含浮动元素；
使用 TABLE 以及 TD 标签作为浮动元素容器；
采用 float:left/float:right 方式将父元素同样浮动，就可以包含浮动内容；
在 IE 6/7 的标准文档模式中设置 “width/height/zoom” 等样式来自动清理浮动。对这些方式我们一一来对照 CSS 标准（或者浏览器特性）来解释下。

使用 clear 样式清除
样例：
1
.clear-float {clear:both;}">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="清理浮动的几种方法以及对应规范说明-转"/>
  <meta property="og:site_name" content="LiBiao's Blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="LiBiao's Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>


<body>
    <header id="masthead" class="" role="banner">
    <div class="wrap">
        <hgroup>
        <h1 id="site_title"><a href="/">LiBiao's Blog</a></h1>
        <h2 id="site_description"><a href="/">奔跑于泥地中为梦想</a></h2>
      </hgroup>

      <nav id="site_nav" role="navigation">
        <ul>
          
            <li><a href="/">Home</a></li>
          
            <li><a href="/archives">Archives</a></li>
          
        </ul>
      </nav>

      <div class="search">
  <form role="search" method="get" class="search_form" action="//google.com/search" accept-charset="utf-8" target="_blank">
    <label>
      <span class="screen_reader_text">搜索：</span>
      <input type="search" class="search_field" placeholder="搜索…" value="" name="q" title="搜索" results="0">
      <input type="hidden" name="q" value="site:libiao.name">
    </label>
    <input type="submit" class="search_submit" value="搜索">
  </form>
</div>

    </div>
</header>


    <div id="content" class="wrap">
        <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2011-12-13T15:13:22.000Z"><a href="/2011/clear-all-studio.html">12月 13 2011</a></time>
      
      
        
          <h1 class="title">清理浮动的几种方法以及对应规范说明-转</h1>
        
      
    </header>
    <div class="entry">
      
        <p><strong>前言</strong></p>
<p>浮动 Floats 是 CSS 中的一种布局方式。它的渲染位置在行框与包含块之间，这样就可以使行框内文字与浮动元素不重叠并且环绕它显示。在布局过程中也经常会使用它来达到左右并排布局的效果。但是，由于浮动特性，容器如果没有明确设定高度，会依照普通流内元素高度设置，这样就会导致脱离普通流的浮动元素溢出容器，影响其后元素布局。</p>
<p>我们将现有已知的清楚浮动元素方法罗列下：</p>
<ol>
<li>采用一个HTML标签，以及css的clear属性，来手工清理浮动；</li>
<li>采用伪类:after，动态建立一个块元素，设定 clear 属性，清理之前的浮动元素；</li>
<li>采用CSS overflow 非 visible 值(overflow:auto/overflow:hidden)设定使父容器包含浮动元素；</li>
<li>采用display:table/display:table-cell 等table系列属性将父元素变成 table 形式自动包含浮动元素；</li>
<li>使用 TABLE 以及 TD 标签作为浮动元素容器；</li>
<li>采用 float:left/float:right 方式将父元素同样浮动，就可以包含浮动内容；</li>
<li>在 IE 6/7 的标准文档模式中设置 “width/height/zoom” 等样式来自动清理浮动。<br>对这些方式我们一一来对照 CSS 标准（或者浏览器特性）来解释下。</li>
</ol>
<h2>使用 clear 样式清除</h2>
<p>样例：</p>
<figure class="highlight lang-css"><div class="box"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="class">.clear-float</span> <span class="rules">{<span class="rule"><span class="attribute">clear</span>:<span class="value">both;</span></span><span class="rule">}</span></span>
</pre></td></tr></table></div></figure>

<p><a id="more"></a><br>clear 属性是 CSS 1 就提供的用来清除浮动的样式，设置了 clear 属性的元素，其上边框位置会紧贴浮动元素的 margin-bottom 边界位置渲染，忽略其 margin-top 设置。这样，父容器高度未设定(值是 auto)时，由于定义的清理浮动样式元素所在位置处于浮动元素之下，容器计算后的实际高度就包含了浮动元素。</p>
<h2>使用伪元素 :after 清除</h2>
<p>样例：</p>
<figure class="highlight lang-css"><div class="box"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>.after-clear-float :after{
    content: &quot;&quot;;
    display: block;
    clear: both;
}
</pre></td></tr></table></div></figure>

<p>:after 伪元素是在 CSS 2 规范内提出的，IE 6/7 并不支持。它的作用是在指定该伪元素元素内，所有子元素最后自动生成一个伪元素，并可以为这个伪元素设定样式。在设定样式中，使用 clear 属性即可达到与手工添加元素指定清理的效果。</p>
<p>注意兼容问题：<br>:after 伪元素在 IE6/7 中并不被支持，这是由于之前的 IE 版本仅完全实现了 CSS 1 规范标准，以及一部分 CSS 2 规范，恰巧 :after 伪元素不在实现之例。</p>
<h2>使用 overflow 清除</h2>
<p>样例：</p>
<figure class="highlight lang-css"><div class="box"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="class">.overflow-clear-float</span> <span class="rules">{<span class="rule"><span class="attribute">overflow</span>:<span class="value">hidden;</span></span><span class="rule">}</span></span>
<span class="comment">/* 或者 */</span>
<span class="class">.overflow-clear-float</span> <span class="rules">{<span class="rule"><span class="attribute">overflow</span>:<span class="value">auto;</span></span><span class="rule">}</span></span>
</pre></td></tr></table></div></figure>

<p>overflow 样式值为 非 visilbe 时，实际上是创建了 CSS 2.1 规范定义的 Block Formatting Contexts。创建了它的元素，会重新计算其内部元素位置，从而获得确切高度。这样父容器也就包含了浮动元素高度。这个名词过于晦涩，在 CSS 3 草案中被变更为名词 Root Flow，顾名思义，是创建了一个新的根布局流，这个布局流是独立的，不影响其外部元素的。实际上，这个特性与 早期 IE 的 hasLayout 特性十分相似。</p>
<p>注意兼容问题：<br>Block Formatting Contexts 概念是在 CSS 2.1 规范内被提出。因此 IE6/7 中并不被支持，这是由于之前的 IE 版本仅完全实现了 CSS 1 规范标准，以及一部分 CSS 2.0 规范。在 IE 7 中，overflow 值为非 visible 时，可以触发 hasLayout 特性。这同样使得 IE 7 同样可以使容器包含浮动元素。</p>
<h2>使用 display:table 清除</h2>
<p>样例：</p>
<figure class="highlight lang-css"><div class="box"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="class">.table-clear-float</span> <span class="rules">{<span class="rule"><span class="attribute">display</span>:<span class="value">table}</span></span></span>
<span class="comment">/* 或者 */</span>
<span class="class">.table-clear-float</span> <span class="rules">{<span class="rule"><span class="attribute">display</span>:<span class="value">table-cell}</span></span></span>
</pre></td></tr></table></div></figure>

<p>当元素 display 值被设定为 table 或 table-cell 时，同样也创建了 CSS 2.1 规范定义的 Block Formatting Contexts。这样父容器也就包含了浮动元素高度。</p>
<p>注意兼容问题：<br>除去 Block Formatting Contexts 在 IE 6/7 中的兼容性外，display:talbe 系列样式设定也不在 IE6/7 的支持范围之内。</p>
<h2>使用表格类元素作为浮动元素容器</h2>
<p>样例：</p>
<figure class="highlight lang-css"><div class="box"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre>&lt;table&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</pre></td></tr></table></div></figure>

<p>当使用 TABLE TD TH 等 TABLE 系列标签时， 元素的 display 值实际上说是 display: table 系列，这同样也创建了 CSS 2.1 规范定义的 Block Formatting Contexts。这样父容器也就包含了浮动元素高度。同时在 IE 6/7 中，TABLE TD TH 等 TABLE 系列标签天然拥有 haslayout 特性，这也可以使容器自动包含浮动元素高度。</p>
<h2>使用浮动父元素清除</h2>
<p>当元素设置 float:left/float:right 时 ，同样也创建了 CSS 2.1 规范定义的 Block Formatting Contexts。这样父容器也就包含了浮动元素高度。同时，这个样式也会在 IE 6/7 内触发 hasLayout 特性，拥有这个特性的元素也可以计算出浮动元素的高度，使父元素包含他们。</p>
<p>实际问题：<br>虽然这种方式并没有兼容问题，但实际使用中并不推荐。因为很容易推断出，页面中只要有一个浮动元素，使用该方法清理浮动将不可避免的使页面所有元素都浮动才可以达到预期效果。</p>
<h2>触发 hasLayout 清除</h2>
<p>样例：</p>
<figure class="highlight lang-css"><div class="box"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="tag">haslayout</span>-<span class="tag">clear</span>-<span class="tag">float</span>:<span class="rules">{<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">1</span>px}</span></span></span>
<span class="comment">/* 或 */</span>
<span class="class">.haslayout-clear-float</span>:<span class="rules">{<span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">1</span>px}</span></span></span>
<span class="comment">/* 或 */</span>
<span class="class">.haslayout-clear-float</span>:<span class="rules">{<span class="rule"><span class="attribute">zoom</span>:<span class="value"><span class="number">1</span>}</span></span></span>
</pre></td></tr></table></div></figure>

<p>‘Layout’ 是 IE 的专有概念，它决定了元素如何对其内容进行定位和尺寸计算，与其他元素的关系和相互作用，以及对应用还有使用者的影响。</p>
<p>‘Layout’ 可以被某些 CSS property（特性）不可逆的触发，而某些 HTML 元素本身就具有 layout 。</p>
<p>‘Layout’ 在 IE 中可以通过 hasLayout 属性来判断一个元素是否拥有 layout ，如 object.currentStyle.hasLayout 。</p>
<p>‘Layout’ 是 IE 浏览器渲染引擎的一个内部组成部分。在 IE 浏览器中，一个元素要么自己对自身的内容进行组织和计算大小， 要么依赖于包含块来计算尺寸和组织内容。为了协调这两种方式的矛盾，渲染引擎采用了 ‘hasLayout’ 属性，属性值可以为 true 或 false。 当一个元素的 ‘hasLayout’ 属性值为 true 时，我们说这个元素有一个布局（layout），或拥有布局。</p>
<h3>默认拥有布局的元素：</h3>
<figure class="highlight lang-html"><div class="box"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">table</span>&gt;</span>
    <span class="tag">&lt;<span class="title">tbody</span>&gt;</span>
        <span class="tag">&lt;<span class="title">tr</span>&gt;</span>
            <span class="tag">&lt;<span class="title">td</span>&gt;</span><span class="tag">&lt;/<span class="title">td</span>&gt;</span>
        <span class="tag">&lt;/<span class="title">tr</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">tbody</span>&gt;</span>
<span class="tag">&lt;/<span class="title">table</span>&gt;</span>
</pre></td></tr></table></div></figure>

<h3>可触发 hasLayout 的 CSS 特性：</h3>
<figure class="highlight lang-css"><div class="box"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="tag">display</span>: <span class="tag">inline</span>-<span class="tag">block</span>
<span class="tag">height</span>: (除 <span class="tag">auto</span> 外任何值)
<span class="tag">width</span>: (除 <span class="tag">auto</span> 外任何值)
<span class="tag">float</span>: (<span class="tag">left</span> 或 <span class="tag">right</span>)
<span class="tag">position</span>: <span class="tag">absolute</span>
<span class="tag">writing</span>-<span class="tag">mode</span>: <span class="tag">tb</span>-<span class="tag">rl</span>
<span class="tag">zoom</span>: (除 <span class="tag">normal</span> 外任意值)
</pre></td></tr></table></div></figure>

<h3>IE7 还有一些额外的属性(不完全列表)可以触发 hasLayout ：</h3>
<figure class="highlight lang-css"><div class="box"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="tag">min</span>-<span class="tag">height</span>: (任意值)
<span class="tag">min</span>-<span class="tag">width</span>: (任意值)
<span class="tag">max</span>-<span class="tag">height</span>: (除 <span class="tag">none</span> 外任意值)
<span class="tag">max</span>-<span class="tag">width</span>: (除 <span class="tag">none</span> 外任意值)
<span class="tag">overflow</span>: (除 <span class="tag">visible</span> 外任意值，仅用于块级元素)
<span class="tag">overflow</span>-<span class="tag">x</span>: (除 <span class="tag">visible</span> 外任意值，仅用于块级元素)
<span class="tag">overflow</span>-<span class="tag">y</span>: (除 <span class="tag">visible</span> 外任意值，仅用于块级元素)
<span class="tag">position</span>: <span class="tag">fixed</span>
</pre></td></tr></table></div></figure>

<p>IE6 以前的版本（也包括 IE6 及以后所有版本的混杂模式，其实这种混杂模式在渲染方面就相当于 IE 5.5）， 通过设置任何元素的 ‘width’ 或 ‘height’（非auto）都可以触发 hasLayout ； 但在 IE6 和 IE7 的标准模式中的行内元素上却不行，设置 ‘display:inline-block’ 才可以。</p>
<h3>注意兼容问题：</h3>
<p>haslayout 特性仅 IE 支持，其他浏览器并无此特性。可以依靠计算布局清理浮动的 haslayout 特性仅在 IE 6/7 中存在，IE8 之后将使用 CSS 2.1 的 Block Formatting Contexts 定义来达到同样效果。</p>
<p>注：IE hasLayout 特性厂商说明链接：hasLayout Property</p>
<p>以上内容是常见清理浮动手段生效的规范（和浏览器厂商特性）原理。我们希望页面开发者们，根据他们的兼容性特征以及实际情况来组合使用，以便达到实际项目目标。<br>建议</p>
<p>对于初学者我们推荐如下方式之一来清理浮动元素，它们均相对简单可靠：</p>
<p>采用一个HTML标签，以及css的clear属性，来手工清理浮动；<br>为元素设置 overflow:hidden 或 overflow:auto 值，配合可以设置 zoom:1 样式触发 IE6 haslayout 特性，来达到兼容所有浏览器清理浮动的目的。<br>采用伪元素:after，配合可以设置 zoom:1 样式触发 IE6/7 haslayout 特性，来达到兼容所有浏览器清理浮动的目的。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">留言</h1>

  
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
  
</section>




    </div>

    <footer id="colophon" class="site_footer" role="footer">
  
  &copy; 2013 biao166
  
</footer>


    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'libiao';
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






</body>
</html>
